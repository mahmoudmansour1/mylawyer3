<section class="content">
<style>
    @media print {
        .col-sm-1, .col-sm-2, .col-sm-3, .col-sm-4, .col-sm-5, .col-sm-6, .col-sm-7, .col-sm-8, .col-sm-9, .col-sm-10, .col-sm-11, .col-sm-12 {
            float: left;
        }
        .col-sm-12 {
            width: 100%;
        }
        .col-sm-11 {
            width: 91.66666667%;
        }
        .col-sm-10 {
            width: 83.33333333%;
        }
        .col-sm-9 {
            width: 75%;
        }
        .col-sm-8 {
            width: 66.66666667%;
        }
        .col-sm-7 {
            width: 58.33333333%;
        }
        .col-sm-6 {
            width: 50%;
        }
        .col-sm-5 {
            width: 41.66666667%;
        }
        .col-sm-4 {
            width: 33.33333333%;
        }
        .col-sm-3 {
            width: 25%;
        }
        .col-sm-2 {
            width: 16.66666667%;
        }
        .col-sm-1 {
            width: 8.33333333%;
        }
        .col-sm-pull-12 {
            right: 100%;
        }
        .col-sm-pull-11 {
            right: 91.66666667%;
        }
        .col-sm-pull-10 {
            right: 83.33333333%;
        }
        .col-sm-pull-9 {
            right: 75%;
        }
        .col-sm-pull-8 {
            right: 66.66666667%;
        }
        .col-sm-pull-7 {
            right: 58.33333333%;
        }
        .col-sm-pull-6 {
            right: 50%;
        }
        .col-sm-pull-5 {
            right: 41.66666667%;
        }
        .col-sm-pull-4 {
            right: 33.33333333%;
        }
        .col-sm-pull-3 {
            right: 25%;
        }
        .col-sm-pull-2 {
            right: 16.66666667%;
        }
        .col-sm-pull-1 {
            right: 8.33333333%;
        }
        .col-sm-pull-0 {
            right: auto;
        }
        .col-sm-push-12 {
            left: 100%;
        }
        .col-sm-push-11 {
            left: 91.66666667%;
        }
        .col-sm-push-10 {
            left: 83.33333333%;
        }
        .col-sm-push-9 {
            left: 75%;
        }
        .col-sm-push-8 {
            left: 66.66666667%;
        }
        .col-sm-push-7 {
            left: 58.33333333%;
        }
        .col-sm-push-6 {
            left: 50%;
        }
        .col-sm-push-5 {
            left: 41.66666667%;
        }
        .col-sm-push-4 {
            left: 33.33333333%;
        }
        .col-sm-push-3 {
            left: 25%;
        }
        .col-sm-push-2 {
            left: 16.66666667%;
        }
        .col-sm-push-1 {
            left: 8.33333333%;
        }
        .col-sm-push-0 {
            left: auto;
        }
        .col-sm-offset-12 {
            margin-left: 100%;
        }
        .col-sm-offset-11 {
            margin-left: 91.66666667%;
        }
        .col-sm-offset-10 {
            margin-left: 83.33333333%;
        }
        .col-sm-offset-9 {
            margin-left: 75%;
        }
        .col-sm-offset-8 {
            margin-left: 66.66666667%;
        }
        .col-sm-offset-7 {
            margin-left: 58.33333333%;
        }
        .col-sm-offset-6 {
            margin-left: 50%;
        }
        .col-sm-offset-5 {
            margin-left: 41.66666667%;
        }
        .col-sm-offset-4 {
            margin-left: 33.33333333%;
        }
        .col-sm-offset-3 {
            margin-left: 25%;
        }
        .col-sm-offset-2 {
            margin-left: 16.66666667%;
        }
        .col-sm-offset-1 {
            margin-left: 8.33333333%;
        }
        .col-sm-offset-0 {
            margin-left: 0%;
        }
    }



.bg-white {
  background-color: #fff;
}

.friend-list {
  list-style: none;
margin-left: -40px;
}

.friend-list li {
  border-bottom: 1px solid #eee;
}

.friend-list li a img {
  float: left;
  width: 45px;
  height: 45px;
  margin-right: 10px;
}

 .friend-list li a {
  position: relative;
  display: block;
  padding: 10px;
  transition: all .2s ease;
  -webkit-transition: all .2s ease;
  -moz-transition: all .2s ease;
  -ms-transition: all .2s ease;
  -o-transition: all .2s ease;
}

.friend-list li.active a {
  background-color: #f1f5fc;
}

.friend-list li a .friend-name, 
.friend-list li a .friend-name:hover {
  color: #777;
}

.friend-list li a .last-message {
  width: 65%;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}

.friend-list li a .time {
  position: absolute;
  top: 10px;
  right: 8px;
}

small, .small {
  font-size: 85%;
}

.friend-list li a .chat-alert {
  position: absolute;
  right: 8px;
  top: 27px;
  font-size: 10px;
  padding: 3px 5px;
}

.chat-message {
  padding: 60px 20px 115px;
}

.chat {
    list-style: none;
    margin: 0;
}

.chat-message{
    background: #f9f9f9;  
}

.chat li img {
  width: 45px;
  height: 45px;
  border-radius: 50em;
  -moz-border-radius: 50em;
  -webkit-border-radius: 50em;
}

img {
  max-width: 100%;
}

.chat-body {
  padding-bottom: 20px;
}

.chat li.left .chat-body {
  margin-left: 70px;
  background-color: #fff;
}

.chat li .chat-body {
  position: relative;
  font-size: 11px;
  padding: 10px;
  border: 1px solid #f1f5fc;
  box-shadow: 0 1px 1px rgba(0,0,0,.05);
  -moz-box-shadow: 0 1px 1px rgba(0,0,0,.05);
  -webkit-box-shadow: 0 1px 1px rgba(0,0,0,.05);
}

.chat li .chat-body .header {
  padding-bottom: 5px;
  border-bottom: 1px solid #f1f5fc;
}

.chat li .chat-body p {
  margin: 0;
}

.chat li.left .chat-body:before {
  position: absolute;
  top: 10px;
  left: -8px;
  display: inline-block;
  background: #fff;
  width: 16px;
  height: 16px;
  border-top: 1px solid #f1f5fc;
  border-left: 1px solid #f1f5fc;
  content: '';
  transform: rotate(-45deg);
  -webkit-transform: rotate(-45deg);
  -moz-transform: rotate(-45deg);
  -ms-transform: rotate(-45deg);
  -o-transform: rotate(-45deg);
}

.chat li.right .chat-body:before {
  position: absolute;
  top: 10px;
  right: -8px;
  display: inline-block;
  background: #fff;
  width: 16px;
  height: 16px;
  border-top: 1px solid #f1f5fc;
  border-right: 1px solid #f1f5fc;
  content: '';
  transform: rotate(45deg);
  -webkit-transform: rotate(45deg);
  -moz-transform: rotate(45deg);
  -ms-transform: rotate(45deg);
  -o-transform: rotate(45deg);
}

.chat li {
  margin: 15px 0;
}

.chat li.right .chat-body {
  margin-right: 70px;
  background-color: #fff;
}

.chat-box {
/*
  position: fixed;
  bottom: 0;
  left: 444px;
  right: 0;
*/
  padding: 15px;
  border-top: 1px solid #eee;
  transition: all .5s ease;
  -webkit-transition: all .5s ease;
  -moz-transition: all .5s ease;
  -ms-transition: all .5s ease;
  -o-transition: all .5s ease;
}

.primary-font {
  color: #3c8dbc;
}

a:hover, a:active, a:focus {
  text-decoration: none;
  outline: 0;
}
.checked {
  color: orange;
}
    </style>


  <div class="row">
    <div class="col-sm-12">
      <div class="row">
        <div class="col-sm-12">
          <div class="box box-info">
            <div class="box-header with-border">
              <h3 class="box-title">&nbsp;</h3>
              <div class="box-tools">
                <div class="btn-group pull-right" style="margin-right: 5px">
                  <a href="" class="btn btn-sm btn-default" title="List"><i
                        class="fa fa-list"></i><span class="hidden-xs">&nbsp;List</span></a>
                </div>
                <div class="btn-group pull-right" style="margin-right: 5px">
                     @if(Admin::user()->isAdministrator())
                     <a href="{{ route('admin.consultations.print',$order->id) }}"  target="_blank" class="btn btn-default"><button class="btn btn-sm btn-primary"  title="Print"><i class="fa fa-print"></i><span
                        class="hidden-xs">&nbsp;Print</span></button></a>


                        @else
                        
                         <a  class="btn btn-default"><button class="btn btn-sm btn-primary"  title="Print"><i class="fa fa-print"></i><span
                        class="hidden-xs" >&nbsp;Print</span></button>
                        </a>
                        @endif
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

        <div class="row">
            @if(Admin::user()->isAdministrator())
          <div class="col-sm-4">
            <div class="box box-primary">
              <div class="box-header with-border">
                <h3 class="box-title">Order Details</h3>
              </div>
              <!-- /.box-header -->
              <div class="box-body table-responsive no-padding">
                <!-- form start -->
                <table class="table table-hover">
                  <tr>
                     <td style="width: 40%;">Consultation Number</td>
                      <td>{{ $order->consultation_number }}</td>

                  </tr>
                  <tr>
                     <td style="width: 40%;">Order Status</td>
                      <td>{{ $order->status->name }}</td>

                  </tr>  
                                                 
                  <!-- <tr>
                    <td style="width: 40%;">Total</td>
                    <td>{{ $order->amount }} KWD</td>
                    
                  </tr> -->
                  <tr>
                    <td>Total</td>
                    <td><strong>{{ number_format($order->amount ,env('NUMBER_FORMAT')) }} KWD</strong></td>
                    
                  </tr>
                </table>
              </div>
            </div>
          </div>
          @endif
          <div class="col-sm-4">
            <div class="box box-primary">
              <div class="box-header with-border">
                <h3 class="box-title">Customer Details 


                </h3>
              </div>
              <div class="box-body table-responsive no-padding">
              <table class="table table-hover">

                <tr>
                    <td>Full Name</td>
                    <td>{{ $order->customer_name }}</td>
                </tr>
                <tr>
                    <td>Email</td>
                    <td>{{ $order->user->email }}</td>
                </tr>
                <tr>
                    <td>Mobile Number</td>
                    <td>{{ $order->customer_phone }}</td>
                </tr>



                <tr>
                    <td>Order Date</td>
                    <td>{{ $order->created_at }}</td>
                  </tr>
                </table>
              </div>
            </div>
          </div>
          <div class="col-sm-4">
            <div class="box box-primary">
              <div class="box-header with-border">
                <h3 class="box-title">Lawyer Details 


                </h3>
              </div>
              <div class="box-body table-responsive no-padding">
              <table class="table table-hover">

                <tr>
                    <td>Full Name</td>
                    <td>{{ $order->lawyer_name }}</td>
                </tr>
                <tr>
                    <td>Email</td>
                    <td>{{ $order->lawyer->email }}</td>
                </tr>
                <tr>
                    <td>Mobile Number</td>
                    <td>{{ $order->lawyer_phone }}</td>
                </tr>
                <tr>
                    <td>Consultations Fees</td>
                    <td>{{ $order->lawyer->consultations_fees }} KWD</td>
                </tr>

                
                <tr>
                    <td>Order Date</td>
                    <td>{{ $order->created_at }}</td>
                  </tr>
                </table>
              </div>
            </div>
          </div>
          </div>


        </div>

        <div class="row">

<div class="col-sm-4">
  <div class="box box-primary">
    <div class="box-header with-border">
      <h3 class="box-title">Payment Details</h3>
    </div>
    <div class="box-body table-responsive no-padding">
      <table class="table table-hover">
        <tr>
          <td style="width: 40%;">PayOut</td>
          <td>{{ $order->payout != 0? 'Payed': 'Not Payed' }}</td>
        </tr>
        <tr>
          <td>Payment Method</td>
          <td>{{ $order->payment->name }}</td>
        </tr>


        <tr>
          <td>Payment Status</td>
          <td>{{ optional($order->paymentStatus)->name_en }}</td>
        </tr>


      </table>
    </div>
    </div>
    </div>

  <div class="col-sm-4">
  <div class="box box-primary">
    <div class="box-header with-border">
      <h3 class="box-title">Review Details</h3>
    </div>
    <div class="box-body table-responsive no-padding">
      <table class="table table-hover">
        <tr>
          <td style="width: 40%;">Rating</td>
          <td>
              <span class="fa fa-star {{ $order->rating >= 1 ? 'checked' : '' }}"></span>
              <span class="fa fa-star {{ $order->rating >= 2 ? 'checked' : '' }}"></span>
              <span class="fa fa-star {{ $order->rating >= 3 ? 'checked' : '' }}"></span>
              <span class="fa fa-star {{ $order->rating >= 4 ? 'checked' : '' }}"></span>
              <span class="fa fa-star {{ $order->rating >= 5 ? 'checked' : '' }}"></span>
          </td>
        </tr>
        <tr>
          <td>Review</td>
          <td>{{ $order->review }}</td>
        </tr>



      </table>
    </div>
    </div>
    </div>


  </div>
  </div>


    <div class="col-sm-12">
      <div class="row">
        <div class="col-sm-12">
          <div class="box box-info">
            <div class="box-header with-border">
              <h3 class="box-title">&nbsp;</h3>
              <div class="box-tools">
                <div class="btn-group pull-right" style="margin-right: 5px">
                  <a href="" class="btn btn-sm btn-default" title="List"><i
                        class="fa fa-list"></i><span class="hidden-xs">&nbsp;List</span></a>
                </div>
                <div class="btn-group pull-right" style="margin-right: 5px">
                   

                        <button onclick="Export2Word('exportContent', 'word-content.docx');">Export as .docx</button>

                     
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>



<div class="container bootstrap snippets bootdey box box-primary" id="exportContent" style="width: 64%;">
    <div class="row">

        <!--=========================================================-->
        <!-- selected chat -->
    	<div class="col-md-12 box-header with-border">
            <div class="chat-message">
                <ul class="chat">

                @foreach ($order->messages as $msg)
            
                    @if($msg->type_status == 0)   
                
                        <li class="left clearfix">
                          <span class="chat-img pull-left">
                            <img src="{{url('/images/4L0219KK2X.jpg')}}" alt="User Avatar">
                          </span>
                          <div class="chat-body clearfix">
                            <div class="header">
                              <strong class="primary-font">{{ $order->customer_name }}</strong>
                              <small class="pull-right text-muted"><i class="fa fa-clock-o"></i> {{ $order->created_at }}</small>
                            </div>
                            @if($msg->type_message == 0)    
                    
                                <p>
                                {{ $msg->message }}
                                </p>
                            @else

                              <a href="{{url($msg->message)}}"><i class="fa fa-file"> {{ $msg->message }}</i></a>

                            @endif 
                         
                          </div>
                        </li>
                    @else

                    <li class="right clearfix">
                    	<span class="chat-img pull-right">
                    		<img src="{{url($order->lawyer->img)}}" alt="User Avatar">
                    	</span>
                    	<div class="chat-body clearfix">
                    		<div class="header">
                    			<strong class="primary-font pull-right">{{ $order->lawyer_name }}</strong>
                    			<small class="pull-right text-muted" style="display: contents;"><i class="fa fa-clock-o"></i> {{ $order->created_at }}</small>
                    		</div>
                        @if($msg->type_message == 0)    
                    
                            <p class="pull-right">
                            {{ $msg->message }}
                            </p>
                        @else

                          <a href="{{url($msg->message)}}" class="pull-right"><i class="fa fa-file"> {{ $msg->message }}</i></a>

                        @endif 


                    	</div>
                    </li>

                    @endif

                @endforeach

                                    
                </ul>
            </div>
            <!-- <div class="chat-box bg-white">
            	<div class="input-group">
            		<input class="form-control border no-shadow no-rounded" placeholder="Type your message here">
            		<span class="input-group-btn">
            			<button class="btn btn-success no-rounded" type="button">Send</button>
            		</span>
            	</div><!-- /input-group -->	
            </div>             
		</div>        
	</div>
</div>








</section>
<script>

function Export2Word(element, filename = ''){
    var preHtml = "<html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'><head><meta charset='utf-8'><title>Export HTML To Doc</title></head><body>";
    var postHtml = "</body></html>";
    var html = preHtml+document.getElementById(element).innerHTML+postHtml;

    var blob = new Blob(['\ufeff', html], {
        type: 'application/msword'
    });
    
    // Specify link url
    var url = 'data:application/vnd.ms-word;charset=utf-8,' + encodeURIComponent(html);
    
    // Specify file name
    filename = filename?filename+'.doc':'document.doc';
    
    // Create download link element
    var downloadLink = document.createElement("a");

    document.body.appendChild(downloadLink);
    
    if(navigator.msSaveOrOpenBlob ){
        navigator.msSaveOrOpenBlob(blob, filename);
    }else{
        // Create a link to the file
        downloadLink.href = url;
        
        // Setting the file name
        downloadLink.download = filename;
        
        //triggering the function
        downloadLink.click();
    }
    
    document.body.removeChild(downloadLink);
}


  function load() {
    $('#printBtn').click(function () {



  var divToPrint=document.getElementById('details');

  var newWin=window.open('','Print-Window');

  newWin.document.open();

  newWin.document.write('<html><body onload="window.print()">'+divToPrint.innerHTML+'</body></html>');

  newWin.document.close();

  setTimeout(function(){newWin.close();},10);


      }
    )
    ;
  }

  if (document.readyState === 'complete') {
    load();
  }
  else {
    $(document).ready(load);
  }
</script>